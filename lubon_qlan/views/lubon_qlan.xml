<?xml version="1.0" encoding="UTF-8"?>


<openerp>
    <data>
        <!-- window action -->
        <!--
            The following tag is an action definition for a "window action",
            that is an action opening a view or a set of views
        -->
        <!-- record model="ir.actions.act_window" id="move_line_action">
            <field name="name">Courses</field>
            <field name="res_model">account.move.line</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">Create the first course
                </p>
            </field>
        </record -->

        <record model="ir.ui.view" id="sites_tree_view">
            <field name="name">sites.tree</field>
            <field name="model">lubon_qlan.sites</field>
            <field name="arch" type="xml">
                <tree string="Sites Tree">
                    <field name="name"  />
                    <field name="alfacode" />
                    <field name="code" />
                    <field name="ipv4"/>
                    <field name="main_contact"/>			
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="sites_search_view">
            <field name="name">sites.search</field>
            <field name="model">lubon_qlan.sites</field>
            <field name="arch" type="xml">
                <search>
                        <field name="alfacode"/>
                        <field name="name"/>
                        <field name="code"/>
                        <field name="ipv4"/>
                        <field name="main_contact"/>
                    <filter name="my_sytes" string="My Sites"
                            domain="[('main_contact', '=', uid)]"/>
                    <group string="Group By">
                        <filter name="by_responsible" string="Responsible"
                                context="{'group_by': 'main_contact'}"/>
                    </group>

                </search>
            </field>
        </record>

        <record model="ir.ui.view" id="sites_form_view">
            <field name="name">sites.form</field>
            <field name="model">lubon_qlan.sites</field>
            <field name="arch" type="xml">
                <form string="Sites form">
                  <header>
                    <button name="button" string="Sites"/>
                  </header>
                  <sheet>
                    <group cols="6">
                      <group string="Admin">
                        <field name="name" placeholder="Lubon"/>
                        <field name="alfacode" placeholder="LUB"/>
                        <field name="code" placeholder="C0000-001"/>
			<field name="main_contact"/>
		      </group>
		      <group string="Network info">
                        <field name="ipv4" placeholder="10.253.0.0/16"/>
                        <field name="ipv6"/>
		      </group>
		     </group>
		      <notebook>
			<page string="Vlan info">
	     			<field name="vlan_ids">
					<tree string="vlans" editable="bottom">
						<field name="name"/>
						<field name="vlan_tag"/>
						<field name="ipv4"/>
						<field name="ipv4_gw"/>
						<field name="dns"/>
						<field name="ipv6"/>
						<field name="ipv6_gw"/>
					</tree>
				</field>
			</page>
                       <page string="ISP Info">
                                <field name="isp_ids">
                                        <tree string="ISP" editable="bottom">
                                                <field name="name"/>
                                                <field name="ip_type"/>
                                                <field name="ip_address"/>
                                                <field name="ip_login"/>
                                                <field name="ip_password"/>
                                                <field name="ip_dns"/>
                                                <field name="ip_dns_reverse"/>
                                                <field name="account"/>
                                                <field name="account_login"/>
                                                <field name="account_password"/>
                                        </tree>
                                </field>
                        </page>
                       <page string="LAN IP info">
                                <field name="ip_ids">
                                        <tree string="IP" editable="bottom">
						<field name="vlan_id" widget="selection" domain="[('site_id','=',site_id)]"/>
						<field name="name"/>
                                                <field name="ip"/>
                                                <field name="ip_type"/>
                                                <field name="mac"/>
						<!-- field name="lubon_qlan.ip.site_id.id"/ -->
						<field name="site_id" invisible="True"/>
                                        </tree>
                                </field>
                        </page>
                        <page string="Contract">
                                <field name="contract_ids" create="False"/>
			</page>
		      </notebook>		
	           </sheet>
		</form>
		</field>
		</record>

  


        <record model="ir.ui.view" id="tenants_tree_view">
            <field name="name">tenants.tree</field>
            <field name="model">lubon_qlan.tenants</field>
            <field name="arch" type="xml">
                <tree string="Tenants Tree">
                    <field name="code"/>
                    <field name="tenant_name"/>
                    <field name="upn"/>
                    <field name="is_telephony"/>
                </tree>
            </field>
        </record>
        <record model="ir.ui.view" id="tenants_form_view">
            <field name="name">tenants.form</field>
            <field name="model">lubon_qlan.tenants</field>
            <field name="arch" type="xml">
                <form string="Tenants form">
                  <header>
                    <button name="button" string="But text"/>
                  </header>
                  <sheet>  
                    <group col="3">
                      <group string="Admin">
                        <field name="code"/>
                        <field name="tenant_name"/>
                        <field name="upn"/>
                      </group>
                      <group string="Telephony">
                        <field name="is_telephony"/>
                        <field name="pbx_password"/>
                      </group>
                      <group string="Security" col="3">
                        <field name="qtest_password"/>
                        <button name="qtest_show" string="Show"/>
                        <field name="qadm_password"/>
                        <button name="qadm_show" string="Show"/>
                      </group>
                    </group>
                    <notebook>
                      <page string="AD Accounts">
                          <field name="adaccounts_ids">
                            <tree string="Accounts" editable="bottom">
                              <field name="name"/>
                              <field name="samaccountname"/>                              
                              <field name="logonname"/>
                              <!-- field name="tenant_id"/ -->
                              <!-- field name="main_partner" invisible="False"/ -->
                              <field name="validcustomers_ids" invisible="True"/>
                              <!--field name="person_id" domain="[['type','=','contact' ]]"/-->
                              <field name="person_id" domain="[('type','=','contact'),('parent_id.id','in', validcustomers_ids[0][2])]"/>
                            </tree>
                          </field>
                      </page>
                      <page string="AD Groups">
                      </page>
                      <page string="Servers">
                      </page>
                      <page string="Contracts">
                        <field name="contract_ids"/>
                      </page>
                      <!-- page string="Customer ids">
                        <field name="validcustomers"/>
                      </page>
                      <page string="Customers">
                        <field name="validcustomers_ids"/>
                      </page -->
                      <page string="Sales orders">
                      </page>
                  </notebook>
                </sheet>
                <div class="oe_chatter">
                </div>    
                </form>
            </field>
        </record>

        <record model="ir.actions.act_window" id="zzqlan_sites_action">
            <field name="name">Sites</field>
            <field name="res_model">lubon_qlan.sites</field>
	    <!-- field name="views">sites_tree_view"</field -->
            <!-- field name="view_ids" ref="sites_tree_view"/ -->
	    <!-- field name="view_id" ref="sites_form_view"/-->
	    <!-- field name="view_id">1490</field -->
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <!-- field name="domain">[["type","=",'site']]</field-->
        </record>
        <record model="ir.actions.act_window" id="qlan_tenants_action">
            <field name="name">AD Tenants</field>
            <field name="res_model">lubon_qlan.tenants</field>
            <!-- field name="view_type">form</field -->
            <field name="view_mode">tree,form</field>
            <!--field name="domain">[["type","=",'delivery']]</field -->
        </record>
        <record model="ir.actions.act_window" id="qlan_contracts_action">
            <field name="name">Contracts</field>
            <field name="res_model">account.analytic.account</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <!--field name="domain">[["type","=",'delivery']]</field -->
        </record>
        <record model="ir.actions.act_window" id="qlan_adaccounts_action">
            <field name="name">AD Accounts</field>
            <field name="res_model">lubon_qlan.adaccounts</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <!--field name="domain">[["type","=",'delivery']]</field -->
        </record>

        <!-- top level menu: no parent -->
        <menuitem id="main_lubon_qlan_menu" name="Qlan" sequence="0"/>
        <!-- A first level in the left side menu is needed
             before using action= attribute -->
        <menuitem id="lubon_qlan_sites_menu" name="Sites"
                  parent="main_lubon_qlan_menu"/>
        <menuitem id="lubon_qlan_tenants_menu" name="Tenants"
                  parent="main_lubon_qlan_menu"/>
        <!-- the following menuitem should appear *after*
             its parent lubon_debug_menu and *after* its
             action move_line_action -->
        <menuitem id="sites_menu" name="Sites" parent="lubon_qlan_sites_menu"
                  action="zzqlan_sites_action"/>
        <!-- menuitem id="invoicess_menu" name="Invoices" parent="lubon_debug_menu"
                  action="invoice_action"/ -->

        <menuitem id="adtenants_menu" name="AD Tenants" parent="lubon_qlan_tenants_menu"
                  action="qlan_tenants_action"/>
        <menuitem id="contracts_menu" name="Contracts" parent="lubon_qlan_tenants_menu"
                  action="qlan_contracts_action"/>
        

        <menuitem id="lubon_qlan_configuration_menu" name="Configuration"
                  parent="main_lubon_qlan_menu"/>
        <menuitem id="lubon_qlan_tables_menu" name="Tables" parent="lubon_qlan_configuration_menu"/>
        <menuitem id="lubon_qlan_adaccounts_menu" name="AD Accounts" parent="lubon_qlan_tables_menu"
                  action="qlan_adaccounts_action"/>

        <!-- Full id location:
             action="lubon_debug.move_line_action"
             It is not required when it is the same module -->
    </data>
</openerp>


