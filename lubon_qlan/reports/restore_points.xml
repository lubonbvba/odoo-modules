<?xml version="1.0" encoding="utf-8"?>
<openerp>
<data>
<!--     <record id="view_account_entries_report_tree" model="ir.ui.view">
        <field name="name">account.entries.report.tree</field>
        <field name="model">account.entries.report</field>
        <field name="arch" type="xml">
            <tree colors="blue:move_state == 'draft';black:move_state == 'posted'" create="false" string="Entries Analysis">
                <field name="date" invisible="1"/>
                <field name="date_created" invisible="1"/>
                <field name="date_maturity" invisible="1"/>
                <field name="ref" invisible="1"/>
                <field name="nbr" sum="# of Entries "/>
                <field name="quantity" sum="# of Products Qty " invisible="not context.get('quantity_visible', False)"/>
                <field name="amount_currency" invisible="not context.get('amount_currency_visible', False)"/>
                <field name="currency_id" invisible="not context.get('currency_id_visible', False)"/>
                <field name="debit"/>
                <field name="credit"/>
                <field name="balance"/>
                <field name="move_state" invisible="1"/>
                <field name="partner_id" invisible="1"/>
                <field name="product_id" invisible="1"/>
                <field name="product_uom_id" invisible="1"/>
                <field name="company_id" invisible="1" groups="base.group_multi_company"/>
                <field name="journal_id" invisible="1"/>
                <field name="account_id" invisible="1"/>
                <field name="fiscalyear_id" invisible="1"/>
                <field name="period_id" invisible="1"/>
                <field name="user_type" invisible="1"/>
                <field name="type" invisible="1"/>
           </tree>
        </field>
    </record> -->
<!--     <record id="view_company_analysis_tree" model="ir.ui.view">
         <field name="name">account.company.analysis.tree</field>
         <field name="model">account.entries.report</field>
         <field name="arch" type="xml">
             <tree string="Company Analysis" >
                <field name="user_type"/>
                <field name="debit" />
                <field name="credit" />
                <field name="balance" />
             </tree>
         </field>
    </record>

  -->   
    <record id="view_restorepoints_instances_report_graph" model="ir.ui.view">
         <field name="name">lubon_qlan.restorepoints_instances.report.graph</field>
         <field name="model">lubon_qlan.restorepoints_instances.report</field>
         <field name="arch" type="xml">
             <graph string="Entries Analysis" type="pivot">
                <field name="asset_name" type="row"/>
                <field name="date" interval="day" type="col"/>
                <field name="number_found" type="measure"/>
                <field name="result_code" type="measure"/>
             </graph>
         </field>
    </record>
        <record id="view_restorepoints_instances_report_tree" model="ir.ui.view">
         <field name="name">lubon_qlan.restorepoints_instances.report.tree</field>
         <field name="model">lubon_qlan.restorepoints_instances.report</field>
         <field name="arch" type="xml">
             <tree string="Entries Analysis">
                <field name="asset_name"/>
                <field name="date" />
                <field name="number_found"/>
                <field name="max_date"/>
             </tree>
         </field>
    </record>

    <record id="view_restorepoints_instances_report_search" model="ir.ui.view">
        <field name="name">lubon_qlan.restorepoints_instances.report.search</field>
        <field name="model">lubon_qlan.restorepoints_instances.report</field>
        <field name="arch" type="xml">
            <search string="Backup Analysis">
                <field name="asset_name"/>
                <field name="date" />
                <filter string="This Month" name="thismonth" domain="[('date','&gt;=',time.strftime('%%Y-%%m-01'))]" help="This month"/>
                <filter string="Number = 0" name="numberfound0" domain="[('number_found','=',0)]" help="Not found"/>
                <filter string="Last 7 days" name="last7" domain="[('date','&gt;=',((context_today()+datetime.timedelta(days=-7)).strftime('%Y-%m-%d')))]" help="Last 7 days"/>
                <filter string="Failed yesterday" name="failedyesterday" domain="['|',('max_date','=',False) , ('max_date','&lt;',((context_today()+datetime.timedelta(days=-1)).strftime('%Y-%m-%d'))) ,('date','&gt;=',((context_today()+datetime.timedelta(days=-7)).strftime('%Y-%m-%d'))) ]" help="VM's failed yesterday, last success date less than yesterday or null"/>
                <filter string="Failed 7 days" name="failed7" domain="['|',('max_date','=',False) , ('max_date','&lt;=',((context_today()+datetime.timedelta(days=-6)).strftime('%Y-%m-%d'))) ,('date','&gt;=',((context_today()+datetime.timedelta(days=-7)).strftime('%Y-%m-%d'))) ]" help="VM's failed 7 days, last success date less than yesterday or null"/>





                <!--group expand="1" string="Group By">
                    <filter string="Asset" context="{'group_by':'asset_id'}"/>
                </group -->
<!--                 <field name="date_maturity"/>
                <filter string="This F.Year" name="thisyear" domain="['|', ('date', '=', False), '&amp;',('date','&lt;=', time.strftime('%%Y-12-31')),('date','&gt;=',time.strftime('%%Y-01-01'))]" help="Journal Entries with period in current year"/>
                <filter string="This Period" name="period" context="{'period':'current_period'}" help="Journal Entries with period in current period"/>
                <separator/>
                <filter string="Unposted" domain="[('move_state','=','draft')]" help = "entries"/>
                <filter string="Posted" domain="[('move_state','=','posted')]" help = "Posted entries"/>
                <separator/>
                <filter string="Unreconciled" domain="[('reconcile_id','=',False), ('account_id.reconcile','=',True)]" help = "Unreconciled entries"/>
                <filter string="Reconciled" domain="[('reconcile_id','!=',False)]" help = "Reconciled entries"/>
                <field name="account_id"/>
                <field name="journal_id"/>
                <field name="period_id"/>
                <group expand="0" string="Extended Filters...">
                    <field name="fiscalyear_id"/>
                    <field name="product_id"/>
                    <field name="partner_id"/>
                    <field name="company_id" groups="base.group_multi_company"/>
                </group>
                <group expand="1" string="Group By">
                    <filter string="Partner" context="{'group_by':'partner_id'}"/>
                    <filter string="Journal" name="group_journal" context="{'group_by':'journal_id'}"/>
                    <filter string="Acc.Type" context="{'group_by':'user_type'}" name="usertype"/>
                    <filter string="Int.Type" context="{'group_by':'type'}"/>
                    <filter string="Company" context="{'group_by':'company_id'}" groups="base.group_multi_company"/>
                    <separator/>
                    <filter string="Entries Month" context="{'group_by':'date:month'}" help="Entries Date by Month"/>
                 </group> -->
            </search>
        </field>
    </record>
    <record id="action_restorepoints_instances_report_failed_yesterday" model="ir.actions.act_window">
        <field name="name">Backup failed yesterday</field>
        <field name="res_model">lubon_qlan.restorepoints_instances.report</field>
        <field name="view_type">form</field>
        <field name="view_mode">graph,tree</field>
        <field name="search_view_id" ref="view_restorepoints_instances_report_search"/>
        <field name="view_id" ref="view_restorepoints_instances_report_graph"/>
        <field name="context">{'group_by':[], 'zzsearch_default_usertype':1, 'search_default_failedyesterday':1, 'zzgroup_by_no_leaf':1}</field>
        <field name="help">This view lets you dig into the backup history</field>
    </record>
    <record id="action_restorepoints_instances_report_failed7" model="ir.actions.act_window">
        <field name="name">Backup failed 7 days</field>
        <field name="res_model">lubon_qlan.restorepoints_instances.report</field>
        <field name="view_type">form</field>
        <field name="view_mode">graph,tree</field>
        <field name="search_view_id" ref="view_restorepoints_instances_report_search"/>
        <field name="view_id" ref="view_restorepoints_instances_report_graph"/>
        <field name="context">{'group_by':[], 'zzsearch_default_usertype':1, 'search_default_failed7':1, 'zzgroup_by_no_leaf':1}</field>
        <field name="help">This view lets you dig into the backup history</field>
    </record>

    <record id="action_restorepoints_instances_report_last7" model="ir.actions.act_window">
        <field name="name">Backup Last 7</field>
        <field name="res_model">lubon_qlan.restorepoints_instances.report</field>
        <field name="view_type">form</field>
        <field name="view_mode">graph,tree</field>
        <field name="search_view_id" ref="view_restorepoints_instances_report_search"/>
        <field name="view_id" ref="view_restorepoints_instances_report_graph"/>
        <field name="context">{'group_by':[], 'zzsearch_default_usertype':1, 'search_default_last7':1, 'zzgroup_by_no_leaf':1}</field>
        <field name="help">This view lets you dig into the backup history</field>
    </record>

    <menuitem action="action_restorepoints_instances_report_failed_yesterday" id="menu_action_restorepoints_instances_failed_yesterday"
        parent="lubon_qlan_backup_menu"
        sequence="2"/>
    <menuitem action="action_restorepoints_instances_report_failed7" id="menu_action_restorepoints_instances_failed7"
        parent="lubon_qlan_backup_menu"
        sequence="3"/>

    <menuitem action="action_restorepoints_instances_report_last7" id="menu_action_restorepoints_instances_last7"
        parent="lubon_qlan_backup_menu"
        sequence="4"/>        
</data>
</openerp>
